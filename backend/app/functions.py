from imblearn.under_sampling import RandomUnderSampler as RUS
from sklearn.utils import resample

from idict import let
from idict.function.dataset import Xy2M
from idict.function.model import fit
from idict.function.vizualization import X2histogram, Xy2scatterplot
from idict.macro.data import xywrapper
from idict.macro.higherorder import compose


def histogram_macro(col, bins=8):
    """
    >>> import numpy as np
    >>> from idict import idict
    >>> from idict.function.dataset import df2Xy
    >>> d = idict.fromtoy(output_format="df") >> df2Xy
    >>> (d >> histogram_macro(col=0)).histogram
    [{'x': '(0.069, 3.975]', 'count': 11}, {'x': '(3.975, 7.85]', 'count': 5}, {'x': '(7.85, 11.725]', 'count': 3}, {'x': '(11.725, 15.6]', 'count': 0}, {'x': '(15.6, 19.475]', 'count': 0}, {'x': '(19.475, 23.35]', 'count': 0}, {'x': '(23.35, 27.225]', 'count': 0}, {'x': '(27.225, 31.1]', 'count': 1}]
    >>> X = np.array([[0, "a", 1.6], [3.2, "b", 2], [8, "a", 3]])
    >>> d["df"] = X
    >>> (d >> histogram_macro(col=1)).histogram
    [{'x': 'a', 'count': 2}, {'x': 'b', 'count': 1}]
    """
    return compose(
        let(X2histogram, input="df", col=col, bins=bins)
    )


def scatter_macro(colx, coly, n=500, seed=0):
    """
    >>> import numpy as np
    >>> from idict import idict
    >>> X = np.array([[0, "a", 1.6], [3.2, "b", 2], [8, "c", 3]])
    >>> y = np.array([2, 4.6, 3.2])
    >>> (idict(X=X, y=y) >> scatter_macro(0,2)).scatterplot
    [{'id': '2.0', 'data': [{'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}, {'x': 0.0, 'y': 1.6}]}, {'id': '4.6', 'data': [{'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}, {'x': 3.2, 'y': 2.0}]}, {'id': '3.2', 'data': [{'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}, {'x': 8.0, 'y': 3.0}]}]
    """
    return compose(
        let(fit, algorithm=RUS),
        xywrapper(function=resample, n_samples=n, random_state=seed),
        Xy2M,
        let(Xy2scatterplot, Xin="M", colx=colx, coly=coly)
    )
